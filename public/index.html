<!doctype html>
<html lang="cs">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>TY VOLE .wtf ‚Äî vibe generator</title>
<meta name="description" content="Gen-Z hl√°≈°ky, chat a p≈ôekladaƒç Gen-Z ‚Üî norm√°ln√≠ ƒçe≈°tina. Instant vibe generator, no cap fr fr üî•">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://ty-vole.wtf/">
<meta property="og:title" content="TY VOLE .wtf ‚Äî instant vibe generator">
<meta property="og:description" content="Gen-Z hl√°≈°ky, chat a p≈ôekladaƒç. Pos√≠lej s rozvahou. üî•">
<meta property="og:image" content="https://ty-vole.wtf/icons/og-image.png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:url" content="https://ty-vole.wtf/">
<meta name="twitter:title" content="TY VOLE .wtf ‚Äî instant vibe generator">
<meta name="twitter:description" content="Gen-Z hl√°≈°ky, chat a p≈ôekladaƒç. Pos√≠lej s rozvahou. üî•">
<meta name="twitter:image" content="https://ty-vole.wtf/icons/og-image.png">

<!-- PWA + ikony -->
<link rel="manifest" href="manifest.webmanifest?v=7">
<meta name="theme-color" content="#111111">
<link rel="apple-touch-icon" href="apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32.png">
<link rel="icon" type="image/png" sizes="16x16" href="favicon-16.png">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="TY VOLE">

<!-- Share system CSS -->
<link rel="stylesheet" href="lib/share.css">

<style>
  :root{
    --bg:#0b0b11; --ink:#f3f3f8; --muted:#a7a7b6; --line:#252536;
    --card:#11121a; --accent:#9DFF00; --cyan:#00F0FF; --ink-dark:#0c0c10;
    --pink:#ff63b8;
  }
  *{box-sizing:border-box}
  body{
    margin:0; color:var(--ink);
    font:16px/1.5 ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,Inter,Arial;
    background:
      radial-gradient(1200px 600px at 75% 5%, rgba(0,240,255,.06), transparent 60%),
      radial-gradient(900px 520px at 15% 90%, rgba(157,255,0,.05), transparent 55%),
      var(--bg);
    min-height:100dvh; display:grid; place-items:center; padding:28px;
    position:relative; overflow-x:hidden;
  }

  /* === MEGA BACKGROUND WORDMARK (cel√° obrazovka) === */
  .bg-wordmark{
    position:fixed; inset:0; display:flex; flex-direction:column; justify-content:space-between;
    pointer-events:none; z-index:0; overflow:hidden; padding:5vh 0;
  }
  .bg-wordmark span{
    font-weight:900; white-space:nowrap;
    font-size:18vh;
    letter-spacing:-0.8vw;
    color:#ffc0e0;                /* svƒõtlej≈°√≠ r≈Ø≈æov√° */
    opacity:.16;
    text-shadow:0 14px 70px rgba(255,192,224,.45);
    user-select:none;
  }
  .bg-top{
    align-self:flex-start;
    transform:translateX(-8vw) rotate(-4deg) scaleX(0.7) scaleY(2.5);
  }
  .bg-bottom{
    align-self:flex-end;
    transform:translateX(8vw) rotate(3deg) scaleX(0.7) scaleY(2.5);
  }

  .wrap{width:min(980px,100%); position:relative; z-index:1;}
  header{display:flex;justify-content:space-between;align-items:center;margin-bottom:14px}
  .brand{display:flex;gap:10px;align-items:center;font-weight:900;letter-spacing:.02em}
  .brand .dot{width:10px;height:10px;border-radius:50%;background:linear-gradient(90deg,var(--accent),var(--cyan));box-shadow:0 0 16px rgba(157,255,0,.7)}
  .brand span{opacity:.66}
  .chips{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
  .chip{border:1px solid var(--line);color:var(--muted);background:rgba(255,255,255,.02);padding:8px 12px;border-radius:999px;font-size:13px}
  .chip.btn{cursor:pointer;color:var(--ink-dark);background:linear-gradient(90deg,var(--accent),var(--cyan));border:0;font-weight:900}

  .card{border:1px solid var(--line);border-radius:24px;background:linear-gradient(180deg,rgba(255,255,255,.03),rgba(255,255,255,.01));padding:26px;box-shadow:0 22px 60px rgba(0,0,0,.38)}
  h1{margin:0 0 6px;font-size:clamp(28px,7vw,56px);line-height:1.1;letter-spacing:-.02em}
  .subtitle{color:var(--muted);font-weight:600;font-size:14px}
  .quote{margin:18px 0 6px;font-weight:900;font-size:clamp(22px,4.5vw,40px);letter-spacing:-.015em; min-height:2.4em}
  .trans{color:var(--muted);font-size:15px;margin-top:2px}
  .row{display:flex;gap:10px;flex-wrap:wrap;margin-top:14px}
  button{appearance:none;border:0;cursor:pointer;font-weight:900;padding:12px 16px;border-radius:14px;transition:all .2s ease}
  .primary{color:var(--ink-dark);background:linear-gradient(90deg,var(--accent),var(--cyan))}
  .ghost{color:var(--ink);background:transparent;border:1px solid var(--line)}
  .tiny{font-size:13px;padding:8px 12px}
  
  /* CTA tlaƒç√≠tka grid - barevn√© pro mobil */
  .btn-group{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:10px;
    width:100%;
    margin-top:8px;
  }
  
  /* Prvn√≠ tlaƒç√≠tko (Drop do chatu) - accent zelen√° */
  #shareMain{
    background:linear-gradient(135deg, var(--accent), #7acc00);
    color:var(--ink-dark);
    font-size:15px;
    padding:16px 20px;
    box-shadow:0 4px 16px rgba(157,255,0,.3);
    border:0;
  }
  #shareMain:hover{
    transform:translateY(-2px);
    box-shadow:0 6px 20px rgba(157,255,0,.4);
  }
  
  /* Druh√© tlaƒç√≠tko (Bake it) - cyan modr√° */
  #downloadCard{
    background:linear-gradient(135deg, var(--cyan), #00c4d4);
    color:var(--ink-dark);
    font-size:15px;
    padding:16px 20px;
    box-shadow:0 4px 16px rgba(0,240,255,.3);
    border:0;
  }
  #downloadCard:hover{
    transform:translateY(-2px);
    box-shadow:0 6px 20px rgba(0,240,255,.4);
  }
  
  /* T≈ôet√≠ tlaƒç√≠tko (Boomer mode) - pink */
  #copy{
    background:linear-gradient(135deg, var(--pink), #ff3d9a);
    color:var(--ink);
    font-size:15px;
    padding:16px 20px;
    box-shadow:0 4px 16px rgba(255,99,184,.3);
    border:0;
    grid-column:1 / -1; /* Na celou ≈°√≠≈ôku */
  }
  #copy:hover{
    transform:translateY(-2px);
    box-shadow:0 6px 20px rgba(255,99,184,.4);
  }
  
  /* Responzivn√≠ - na √∫zk√©m mobilu stack vertik√°lnƒõ */
  @media(max-width:480px){
    .btn-group{
      grid-template-columns:1fr;
    }
    #copy{
      grid-column:1;
    }
  }

  footer{margin-top:12px;display:flex;justify-content:space-between;align-items:center;color:var(--muted);font-size:12px}
  .mode{display:flex;gap:6px;align-items:center}
  .mode button{padding:6px 10px;border-radius:999px;border:1px solid var(--line);background:transparent;color:var(--muted);font-weight:700}
  .mode button.active{border-color:var(--accent);color:var(--ink)}

  .cta{
    position:fixed;right:18px;bottom:18px;
    width:min(380px,calc(100% - 36px));
    border-radius:28px;
    padding:18px 24px;
    background:linear-gradient(rgba(11,11,17,.98), rgba(11,11,17,.98)) padding-box,
               linear-gradient(135deg, var(--accent), var(--cyan)) border-box;
    border:2px solid transparent;
    backdrop-filter:saturate(140%) blur(8px);
    box-shadow:0 20px 60px rgba(0,0,0,.5), 0 0 0 1px rgba(157,255,0,.2) inset;
    z-index:2;
    transition:transform .2s ease, box-shadow .2s ease;
  }
  .cta:hover{
    transform:translateY(-2px);
    box-shadow:0 24px 70px rgba(0,0,0,.6), 0 0 0 1px rgba(157,255,0,.3) inset;
  }
  .cta a{display:block;color:var(--accent);font-weight:900;text-decoration:none;font-size:18px;letter-spacing:-0.01em}
  .cta small{display:block;color:var(--muted);margin-top:6px}
  
  /* bottom sheet (translator) */
  .sheet-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none; z-index:10;}
  .sheet{position:fixed;left:0;right:0;bottom:0;max-height:70dvh;background:#11121a;border-top:1px solid var(--line);border-radius:18px 18px 0 0;transform:translateY(100%);transition:.2s ease-out; z-index:11;}
  .sheet.open{transform:translateY(0)}
  .sheet-backdrop.show{display:block}
  .sheet .head{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;border-bottom:1px solid var(--line)}
  .sheet .body{padding:14px 16px}
  .cols{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  textarea{width:100%;min-height:120px;background:#0f1016;color:var(--ink);border:1px solid var(--line);border-radius:12px;padding:12px;font:15px/1.5 ui-sans-serif,system-ui}
  .smallrow{display:flex;gap:8px;margin-top:8px}
</style>
</head>
<body>
  <!-- big background wordmark -->
  <div class="bg-wordmark">
    <span class="bg-top">TY VOLE</span>
    <span class="bg-bottom">.WTF</span>
  </div>

  <div class="wrap">
    <header>
      <div class="brand"><div class="dot"></div><div>TY&nbsp;VOLE<span>.wtf</span></div></div>
      <div class="chips">
        <div class="chip">#skibidi</div><div class="chip">#rizz</div><div class="chip">#based</div><div class="chip">#drip</div>
        <button id="btnSheet" class="chip btn">Skibidi p≈ôekladaƒç</button>
      </div>
    </header>

    <div class="card">
      <div class="subtitle">Instant vibe generator</div>
      <div class="quote" id="quote">‚Ä¶naƒç√≠t√°m fresh hl√°≈°ku‚Ä¶</div>
      <div class="trans" id="quoteTranslated" style="display:none;"></div>

      <div class="row">
        <button id="next" class="primary">Dal≈°√≠ shot üî•</button>
        <label class="chip" style="cursor:pointer;">
          <input id="chkAutoTrans" type="checkbox" style="vertical-align:middle;margin-right:6px;"> Dej p≈ôeklad
        </label>
      </div>
      
      <!-- Barevn√© CTA tlaƒç√≠tka v gridu -->
      <div class="btn-group">
        <button id="shareMain" title="Sd√≠lej kartu do chatu">
          <span id="shareMainText">Drop do chatu üíÄ</span>
        </button>
        <button id="downloadCard" title="St√°hnout jako obr√°zek">
          <span id="downloadText">Bake it üç∞</span>
        </button>
        <button id="copy" title="Zkop√≠ruje URL">
          <span id="copyText">Boomer sharing mode</span>
        </button>
      </div>
      <div id="ctaMicrocopy" class="cta-microcopy" style="display:none;"></div>

      <footer>
        <div class="mode">
          <span>Mood:</span>
          <button data-mode="genz" id="btnGenz" class="active">Gen-Z</button>
          <button data-mode="family_friendly" id="btnSafe">Safe</button>
        </div>
      </footer>
    </div>
  </div>

  <div class="cta">
    <a href="/chat.html">M√°m i chat, bro üò≠ ‚Üí</a>
  </div>

  <!-- Translator bottom sheet -->
  <div class="sheet-backdrop" id="backdrop"></div>
  <section class="sheet" id="sheet">
    <div class="head">
      <strong>P≈ôekladaƒç Gen-Z ‚Üî norm√°ln√≠</strong>
      <div>
        <button id="closeSheet" class="ghost tiny">Zav≈ô√≠t</button>
      </div>
    </div>
    <div class="body">
      <div class="cols">
        <div>
          <div class="subtitle">Norm√°ln√≠ ‚Üí Gen-Z</div>
          <textarea id="tNorm" placeholder="Napi≈° norm√°lnƒõ‚Ä¶"></textarea>
        </div>
        <div>
          <div class="subtitle">Gen-Z ‚Üí Norm√°ln√≠</div>
          <textarea id="tGenz" placeholder="Nebo Gen-Z‚Ä¶"></textarea>
        </div>
      </div>
      <div style="text-align:center;margin-top:16px;display:flex;gap:12px;justify-content:center;align-items:center;">
        <button id="bTranslate" class="primary" style="min-width:200px;">P≈ôelo≈æit ‚ÜîÔ∏è</button>
        <button id="bClear" class="ghost" style="min-width:140px;">üóëÔ∏è Sma≈æ text</button>
      </div>
      <div id="explanation" style="margin-top:16px;padding:12px;background:rgba(157,255,0,.05);border:1px solid rgba(157,255,0,.2);border-radius:12px;display:none;">
        <div style="font-weight:700;margin-bottom:8px;color:var(--accent);">üí° Co to znamen√°?</div>
        <div id="explanationText" style="font-size:14px;line-height:1.6;color:var(--muted);"></div>
      </div>
    </div>
  </section>

<script>
let MODE = (localStorage.getItem('mode') || 'genz');
let AUTO = localStorage.getItem('autoTrans') === '1';
const LAST = [];
let translationInProgress = false;

// ===== Lexikon =====
const L = { openers:[], tones_pos:[], tones_mid:[], tones_neg:[], verbs:[], nouns:[], actions:[], emotes:[], templates:[], quotes:[] };

const pick = arr => arr[Math.floor(Math.random()*arr.length)];
const uniquePick = (arr) => { let tries=0; while(tries<10){ const v=pick(arr); if(!LAST.includes(v)) return v; tries++; } return pick(arr); };

async function loadLexicon(){
  try{
    const lex = await fetch('/config/lexicon.json?v=20251102').then(r=>{
      if(!r.ok) throw new Error('lexicon fetch '+r.status);
      return r.json();
    });
    Object.assign(L, lex);
  }catch(e){
    Object.assign(L, { openers:["Hele"], templates:["No cap, dal≈°√≠."], quotes:["No cap, dal≈°√≠."] });
  }
}

function compose(){
  if (Math.random() < 0.8 && L.templates.length){
    const tpl = uniquePick(L.templates);
    return tpl
      .replace("{opener}", uniquePick(L.openers))
      .replace("{tones_pos}", uniquePick(L.tones_pos))
      .replace("{tones_mid}", uniquePick(L.tones_mid))
      .replace("{tones_neg}", uniquePick(L.tones_neg))
      .replace("{verbs}", uniquePick(L.verbs))
      .replace("{nouns}", uniquePick(L.nouns))
      .replace("{actions}", uniquePick(L.actions))
      .replace("{emote}", uniquePick(L.emotes));
  }
  return uniquePick(L.quotes.length ? L.quotes : ["No cap, dal≈°√≠."]);
}

function setUrlState(text, push=true){
  if (LAST.push(text)>10) LAST.shift();
  const url=new URL(location.href);
  url.searchParams.set('q', encodeURIComponent(text));
  url.searchParams.set('mode', MODE);
  history[push?'pushState':'replaceState'](null,'',url);
}

async function typeOut(el, text, speed=18){
  el.textContent = '';
  for (let i=0;i<text.length;i++){
    el.textContent += text[i];
    await new Promise(r=>setTimeout(r, speed));
  }
}

async function setQuoteTyped(text, push=true){
  const el = document.getElementById('quote');
  // Schov√°me p≈ôeklad bƒõhem psan√≠
  const transEl = document.getElementById('quoteTranslated');
  transEl.style.display='none';
  
  await typeOut(el, text);
  setUrlState(text, push);
  
  // Poƒçk√°me chvilku po dops√°n√≠, ne≈æ zaƒçneme p≈ôekl√°dat
  if(AUTO) {
    await new Promise(r=>setTimeout(r, 100));
    showAutoTranslation(text);
  }
}

/* ========= Lok√°ln√≠ p≈ôekladaƒç CZ <-> Gen-Z (regex-based) ========= */
const CZ2GZ_PHRASES = [
  [/(c√≠t√≠m|citim)\s+se\s+(hodnƒõ|hodne)\s+trapn(ƒõ|e)/gi, 'c√≠t√≠m se mega cringe'],
  [/(c√≠t√≠m|citim)\s+se\s+trapn(ƒõ|e)/gi, 'c√≠t√≠m se cringe'],
  [/bez\s+(srandy|kec≈Ø|kecu)/gi, 'no cap'],
  [/to\s+je\s+(pravda|real)/gi, 'no cap'],
  [/to\s+je\s+le≈æ/gi, 'cap']
];

const CZ2GZ_WORDS = [
  // Z√°kladn√≠ Gen-Z v√Ωrazy co u≈æ jsou Gen-Z - nech√°m je b√Ωt
  [/moment/gi, 'moment'],
  [/setup/gi, 'setup'],
  [/flow/gi, 'flow'],
  
  // SPECIFICK√â FR√ÅZE NEJD≈ò√çV (p≈ôed jednotliv√Ωmi slovy!)
  [/trapn(√Ω|√©ho|√©mu|√Ωm|√©m|√°|ou|√©|e|y|i)\s+vtip/gi, 'dad joke'],
  [/strach\s+(z|ze)\s+zme(≈°|s)k(√°|a)n(√≠|√©ho|√≠mu|√≠m|√©m)/gi, 'FOMO'],
  [/nejlep(≈°√≠|≈°√≠ho|≈°√≠mu|≈°√≠m|≈°em)\s+(k(√°|a)mo(≈°|s|≈°e|≈°i|≈°em|≈°ovi)|kamar(√°|a)d(a|y|u|em|ovi|ka|ce|ku|kou)?)/gi, 'bestie'],
  [/vztah\s+nevztah/gi, 'situationship'],
  [/mimo\s+realit(u|y|ƒõ)/gi, 'delulu'],
  [/hniloba\s+mozku/gi, 'brain rot'],
  [/star(≈°√≠|≈°√≠ho)\s+generac(e|i)/gi, 'boomer'],
  [/tr(√°|a)vit\s+(ƒç|c)as\s+s\s+p(≈ô|r)(√°|a)teli/gi, 'felit'],
  [/u(ƒç|c)en(√≠|√©ho|√≠mu|√≠m|√©m)\s+nejde/gi, 'academic victim'],
  [/varovn(√Ω|√©ho|√©mu|√Ωm|√©m|√°|ou|√©|e|y|i)\s+sign(√°|a)l/gi, 'red flag'],
  [/pozitivn(√≠|√≠ho|√≠mu|√≠m|√©m|√°|ou|√©|i)\s+sign(√°|a)l/gi, 'green flag'],
  [/neutr(√°|a)ln(√≠|√≠ho|√≠mu|√≠m|√©m|√°|ou|√©|i)\s+sign(√°|a)l/gi, 'beige flag'],
  
  // DEL≈†√ç V√ùRAZY p≈ôed krat≈°√≠mi
  [/(v√Ω|vy)born(√Ω|√©ho|√©mu|√Ωm|√©m|√°|ou|√©|e|y|i)/gi, 'bussin'],
  [/perfektn(√≠|√≠ho|√≠mu|√≠m|√©m|√°|ou|√©|i)/gi, 'slay'],
  [/legend(√°|a)rn(√≠|√≠ho|√≠mu|√≠m|√©m|√°|ou|√©|i)/gi, 'goated'],
  [/autentick(√Ω|√©ho|√©mu|√Ωm|√©m|√°|ou|√©|e|y|i)/gi, 'based'],
  [/toxick(√Ω|√©ho|√©mu|√Ωm|√©m|√°|ou|√©|e|y|i)/gi, 'toxic'],
  [/trapn(√Ω|√©ho|√©mu|√Ωm|√©m|√°|ou|√©|e|y|i)/gi, 'cringe'],
  [/divn(√Ω|√©ho|√©mu|√Ωm|√©m|√°|ou|√©|e|y|i)/gi, 'skibidi'],
  [/pr≈Ømƒõrn(√Ω|√©ho|√©mu|√Ωm|√©m|√°|ou|√©|e|y|i)/gi, 'mid'],
  [/nudn(√Ω|√©ho|√©mu|√Ωm|√©m|√°|ou|√©|e|y|i)/gi, 'mid'],
  [/zamilov(√°|a)n(√≠|√©ho|√≠mu|√≠m|√©m|√°|ou|√©|i)/gi, 'crush'],
  [/bl(√°|a)zniv(√Ω|√©ho|√©mu|√Ωm|√©m|√°|ou|√©|e|y|i)/gi, 'goofy'],
  [/absurdn(√≠|√≠ho|√≠mu|√≠m|√©m|√°|ou|√©|i)/gi, 'skibidi'],
  [/z(√°|a)bavn(√Ω|√©ho|√©mu|√Ωm|√©m|√°|ou|√©|e|y|i)/gi, 'lit'],
  [/podez(≈ô|r)el(√Ω|√©ho|√©mu|√Ωm|√©m|√°|ou|√©|e|y|i)/gi, 'sus'],
  [/p(≈ô|r)ecitliv(ƒõ|e)l(√Ω|√©ho|√©mu|√Ωm|√©m|√°|ou|√©|e|y|i)/gi, 'snowflake'],
  [/ignorov(√°|a)n(√≠|√©ho|√≠mu|√≠m|√©m)/gi, 'ghosting'],
  [/manipulac(e|i)/gi, 'gaslighting'],
  [/ne(√∫|u)sp(ƒõ|e)(≈°|s)n(√Ω|√©ho|√©mu|√Ωm|√©m|√°|ou|√©|e|y|i)/gi, 'fail'],
  [/elegant(n|t)(√≠|√≠ho|√≠mu|√≠m|√©m|√°|ou|√©|i)/gi, 'classy'],
  [/zru(≈°|s)en(√Ω|y|√©ho|√©mu|√Ωm|√©m|√°|ou|√©|e)/gi, 'cancelled'],
  [/unik(√°|a)tn(√≠|√≠ho|√≠mu|√≠m|√©m|√°|ou|√©|i)/gi, 'sigma'],
  [/nez(√°|a)visl(√Ω|√©ho|√©mu|√Ωm|√©m|√°|ou|√©|e|y|i)/gi, 'sigma'],
  [/naivn(√≠|√≠ho|√≠mu|√≠m|√©m|√°|ou|√©|i)/gi, 'delulu'],
  [/(≈°|s)(t|≈•)astn(√Ω|√©ho|√©mu|√Ωm|√©m|√°|ou|√©|e|y|i)/gi, 'blessed'],
  [/eleg(√°|a)ntn(√≠|√≠ho|√≠mu|√≠m|√©m|√°|ou|√©|i)/gi, 'drip'],
  [/sm(ƒõ|e)(≈°|s)n(√Ω|√©ho|√©mu|√Ωm|√©m|√°|ou|√©|e|y|i)/gi, 'goofy'],
  
  // KRAT≈†√ç OBECN√â V√ùRAZY a≈æ nakonec
  [/dobr(√Ω|√©ho|√©mu|√Ωm|√©m|√°|ou|√©|e|y|i)/gi, 'valid'],
  [/super/gi, 'fire'],
  [/hodn(ƒõ|e)/gi, 'mega'],
  [/dost/gi, 'lowkey'],
  [/opravdu/gi, 'fr'],
  [/v(√°|a)≈æn(ƒõ|e)/gi, 'fr'],
  [/up≈ô(√≠|i)mn(ƒõ|e)/gi, 'ngl'],
  [/charism(a|y|u|ou|e|ƒõ)/gi, 'rizz'],
  [/drb(y|≈Ø|√°m|ami|a)/gi, 'tea'],
  [/n(√°|a)lad(a|y|u|ou|ƒõ)/gi, 'vibe'],
  [/atmosf(√©|e)ra/gi, 'vibe'],
  [/styl/gi, 'drip'],
  [/vibe/gi, 'vibe'],
  
  // Akce a verba
  [/pos(√≠|i)lit/gi, 'buffnout'],
  [/oslabit/gi, 'nerfnout'],
  [/opravit/gi, 'fixnout'],
  [/(≈æ|z)vatlat/gi, 'yapping'],
  [/brblat/gi, 'yapping'],
  [/pop(√≠|i)jet/gi, 'felit'],
  [/chlad(n|≈à)a/gi, 'chill'],
  [/p(≈ô|r)edv(√°|a)d(ƒõ|e)t\s+se/gi, 'flex'],
  [/chlubi(t\s+se|l|la|li)/gi, 'flex'],
  [/provokovat|provokuje|provokoval|provokovali/gi, 'trolling'],
  
  // Jednoduch√© v√Ωrazy
  [/extr√©mn(ƒõ|e)/gi, 'AF'],
  [/(nejlep(≈°√≠|≈°√≠)|nej)/gi, 'GOAT'],
  [/chyba/gi, 'fail'],
  [/selh(√°|a)n(√≠|√©ho|√≠mu|√≠m|√©m)/gi, 'fail'],
  [/podiv(√≠|i)n/gi, 'weirdo'],
  [/nesmysln(√Ω|√©ho|√©mu|√Ωm|√©m|√°|ou|√©|e|y|i)\s+p(≈ô|r)(√≠|i)sp(ƒõ|e)vek/gi, 'shitpost'],
  [/cool/gi, 'fire'],
  [/h(≈ô|r)(√≠|i)(≈°|s)n(√≠|√≠ho|√≠mu|√≠m|√©m|√°|ou|√©|i)k/gi, 'lil bro'],
  [/sestra|sest≈ôiƒçka/gi, 'lil sis'],
  [/bratr|br√°cha/gi, 'bro'],
  [/kamar(√°|a)d/gi, 'homie'],
  [/k√°mo≈°/gi, 'bestie'],
  [/hit/gi, 'banger'],
  [/l(≈æ|z)e/gi, 'cap'],
  [/nepravda/gi, 'cap'],
  [/pravda/gi, 'no cap']
];

// Slovn√≠k s vysvƒõtlen√≠mi pro Gen-Z v√Ωrazy
const GZ2CZ_EXPLANATIONS = {
  'af': 'As F**k - pou≈æ√≠v√° se ke zd≈Øraznƒõn√≠, nap≈ô. "cool AF" = opravdu super',
  'banger': 'nƒõco v√Ωjimeƒçnƒõ dobr√©ho, hit (hudba, video, z√°≈æitek)',
  'bestie': 'best friend, nejlep≈°√≠ kamar√°d/ka',
  'boomer': 'ƒçlovƒõk nerozumƒõj√≠c√≠ modern√≠m trend≈Øm, star≈°√≠ generace',
  'brain rot': 'hniloba mozku - p≈ô√≠li≈° mnoho ƒçasu s mƒõlk√Ωm obsahem',
  'cancelled': 'zru≈°en√Ω - ztr√°ta podpory kv≈Øli kontroverz√≠m',
  'classy': 'stylov√Ω, elegantn√≠, m√° t≈ô√≠du',
  'cringe': 'trapn√© a nep≈ô√≠jemn√©',
  'crush': 'zamilov√°n√≠, pobl√°znƒõn√≠ do nƒõkoho',
  'dad joke': 'trapn√Ω prvopl√°nov√Ω vtip',
  'delulu': 'mimo realitu, naivn√≠, nesmysln√° oƒçek√°v√°n√≠',
  'drip': 'skvƒõl√Ω smysl pro m√≥du, styl',
  'fail': 'chyba, selh√°n√≠, ne√∫spƒõch',
  'flexit': 'p≈ôedv√°dƒõt se, ƒçasto s materi√°ln√≠m bohatstv√≠m',
  'fomo': 'fear of missing out - strach z toho, ≈æe nƒõco zme≈°k√°te',
  'ghosting': 'ignorov√°n√≠, p≈ôestat odpov√≠dat',
  'goat': 'greatest of all time - nejlep≈°√≠ v≈°ech dob',
  'goofy': 'bl√°zniv√Ω, vtipn√Ω, trochu trapn√Ω ale roztomil√Ω',
  'rizz': 'charisma, ≈°arm, schopnost nƒõkoho okouzlit',
  'sick': 'cool, stylov√©, super (pozitivnƒõ)',
  'sigma': 'nez√°visl√Ω samot√°≈ô, nepot≈ôebuje uzn√°n√≠',
  'shady': 'podez≈ôel√©, ned≈Øvƒõryhodn√©',
  'skibidi': 'divn√©, absurdn√≠, z√°bavn√©',
  'slay': 'perfektn√≠ v√Ωkon, stylov√Ω, mimo≈ô√°dnƒõ √∫spƒõ≈°n√Ω',
  'vibe': 'n√°lada, atmosf√©ra',
  'weirdo': 'podiv√≠n, ƒçlovƒõk vymykaj√≠c√≠ se norm√°m',
  'lit': 'skvƒõl√©, v√Ωborn√©, zaj√≠mav√©',
  'mid': 'pr≈Ømƒõrn√©, meh',
  'bussin': 'v√Ωborn√© (hlavnƒõ j√≠dlo)',
  'based': 'autentick√©, cool, sebevƒõdom√© n√°zory',
  'toxic': 'toxick√© chov√°n√≠',
  'valid': 'dobr√©, solidn√≠, rozumn√©',
  'cope': 'zp≈Øsob vyrovn√°n√≠ se s nƒõƒç√≠m',
  'flex': 'chlubit se, p≈ôedv√°dƒõt se',
  'stan': 'posedl√Ω fanou≈°ek',
  'sus': 'suspicious - podez≈ôel√Ω',
  'cap': 'le≈æ, nen√≠ pravda',
  'no cap': 'fakt, bez kec≈Ø, je to pravda',
  'iykyk': 'if you know you know - kdy≈æ v√≠≈°, tak v√≠≈°',
  'felit': 'tr√°vit ƒças s p≈ô√°teli, pop√≠jet, chillovat',
  'feelovat': 'pocitovƒõ pro≈æ√≠t, c√≠tit',
  'fixnout': 'opravit',
  'buffnout': 'pos√≠lit',
  'nerfnout': 'oslabit',
  'yapping': '≈ævatlat, brblat'
};

const GZ2CZ_WORDS = [
  // Bƒõ≈æn√° angliƒçtina (CEL√â FR√ÅZE PRVN√ç - nejdel≈°√≠ prvn√≠!)
  [/no\s+thoughts,?\s+just\s+vibes\.?/gi, '≈æ√°dn√© my≈°lenky, jenom n√°lada'],
  [/no\s+thoughts,?\s+just/gi, '≈æ√°dn√© my≈°lenky, jenom'],
  [/literally,?\s+no\s+thoughts/gi, 'doslova ≈æ√°dn√© my≈°lenky'],
  [/instant\s+vibe\s+generator/gi, 'gener√°tor n√°lady'],
  
  // Fr√°ze (del≈°√≠ mus√≠ b√Ωt prvn√≠)
  [/no\s+cap/gi, 'fakt, bez kec≈Ø'],
  [/real\s+talk/gi, 'up≈ô√≠mnƒõ'],
  [/skill\s+issue/gi, 'probl√©m se schopnostmi'],
  [/hard\s+carry/gi, 't√°hnout t√Ωm'],
  [/hard\s+W/gi, 'velk√© v√≠tƒõzstv√≠'],
  [/on\s+point/gi, 'p≈ôesn√©'],
  [/chef'?s\s+kiss/gi, 'dokonal√©'],
  [/low\s+effort/gi, 'n√≠zk√© √∫sil√≠'],
  [/not\s+it/gi, '≈°patn√©'],
  [/not\s+deep/gi, 'nen√≠ to slo≈æit√©'],
  [/short\s+walk/gi, 'kr√°tk√° proch√°zka'],
  [/dark\s+mode/gi, 'tmav√Ω re≈æim'],
  [/deep\s+breath/gi, 'hlubok√Ω n√°dech'],
  [/mind\s+reset/gi, 'reset mysli'],
  
  // Verbs (ƒçeskoƒçesk√° Gen-Z slovesa)
  [/fixnout/gi, 'opravit'],
  [/buffnout/gi, 'pos√≠lit'],
  [/nerfnout/gi, 'oslabit'],
  [/shipnout/gi, 'vydat'],
  [/rerollnout/gi, 'zkusit znovu'],
  [/locknout/gi, 'uzamknout'],
  [/pushnout/gi, 'poslat'],
  [/deploynout/gi, 'nasadit'],
  [/scale[\-\s]?nout/gi, '≈°k√°lovat'],
  [/mute[\-\s]?nout/gi, 'ztlumit'],
  [/ghostnout/gi, 'ignorovat'],
  [/cancelnout/gi, 'zru≈°it'],
  [/save[\-\s]?nout/gi, 'ulo≈æit'],
  [/pin[\-\s]?nout/gi, 'p≈ôipnout'],
  [/dropnout/gi, 'pustit'],
  [/grindit/gi, 'd≈ô√≠t'],
  [/resetnout/gi, 'resetovat'],
  [/revive[\-\s]?nout/gi, 'o≈æivit'],
  [/speedrunout/gi, 'rychle projet'],
  [/min[\-\s]?maxnout/gi, 'optimalizovat'],
  [/pivotnout/gi, 'zmƒõnit smƒõr'],
  [/stacknout/gi, 'navrstvit'],
  [/pingnout/gi, 'ozvat se'],
  [/syncnout/gi, 'synchronizovat'],
  [/merge[\-\s]?nout/gi, 'slouƒçit'],
  [/clapnout\s+bug/gi, 'opravit chybu'],
  
  // Bƒõ≈æn√° anglick√° slova (podstatn√° jm√©na)
  [/\bthoughts\b/gi, 'my≈°lenky'],
  [/\bvibes\b/gi, 'n√°lada'],
  [/\binstant\b/gi, 'okam≈æit√Ω'],
  [/\bgenerator\b/gi, 'gener√°tor'],
  
  // Nouns
  [/setup/gi, 'nastaven√≠'],
  [/flow/gi, 'tok'],
  [/mood/gi, 'n√°lada'],
  [/grind/gi, 'd≈ôina'],
  [/energy/gi, 'energie'],
  [/stack/gi, 'vrstva'],
  [/buff/gi, 'pos√≠len√≠'],
  [/nerf/gi, 'oslaben√≠'],
  [/clout/gi, 'vliv'],
  [/brain/gi, 'mozek'],
  [/focus/gi, 'soust≈ôedƒõn√≠'],
  [/playlist/gi, 'playlist'],
  [/deadline/gi, 'term√≠n'],
  [/scope/gi, 'rozsah'],
  [/context/gi, 'kontext'],
  [/cooldown/gi, 'pauza'],
  [/overhead/gi, 'n√°klad'],
  [/latence/gi, 'zpo≈ædƒõn√≠'],
  [/momentum/gi, 'rozjezd'],
  [/checkpoint/gi, 'kontroln√≠ bod'],
  [/meta/gi, 'meta'],
  
  // Tones & slang
  [/skibidi/gi, 'divn√©'],
  [/bussin['"]?/gi, 'v√Ωborn√©'],
  [/rizz/gi, 'charisma'],
  [/based/gi, 'autentick√©'],
  [/slay/gi, 'perfektn√≠'],
  [/cringe/gi, 'trapn√©'],
  [/vibe(s)?/gi, 'n√°lada'],
  [/toxic/gi, 'toxick√©'],
  [/\btea\b/gi, 'drby'],
  [/delulu/gi, 'mimo realitu'],
  [/peak/gi, 'vrchol'],
  [/clean/gi, 'ƒçist√©'],
  [/solid/gi, 'solidn√≠'],
  [/sleek/gi, 'elegantn√≠'],
  [/smooth/gi, 'hladk√©'],
  [/crisp/gi, 'ostr√©'],
  [/\bgas\b/gi, 'super'],
  [/\bsus\b/gi, 'podez≈ôel√©'],
  [/yikes/gi, 'fuj'],
  [/\bdead\b/gi, 'mrtv√©'],
  [/trash/gi, '≈°patn√©'],
  [/iffy/gi, 'nejist√©'],
  [/\boff\b/gi, 'divn√©'],
  [/overkill/gi, 'p≈ôehnan√©'],
  [/\bpain\b/gi, 'bolest'],
  [/cope/gi, 'vyrovn√°v√°n√≠'],
  [/doom/gi, 'z√°huba'],
  [/\bnah\b/gi, 'ne'],
  [/not\s+it/gi, 'to nen√≠ ono'],
  [/basic/gi, 'z√°kladn√≠'],
  [/lukewarm/gi, 'vla≈æn√©'],
  [/\blite\b/gi, 'lehk√©'],
  [/standard/gi, 'standardn√≠'],
  [/neutral/gi, 'neutr√°ln√≠'],
  [/average/gi, 'pr≈Ømƒõrn√©'],
  [/not\s+deep/gi, 'nen√≠ to hlubok√©'],
  [/whatever/gi, 'cokoli'],
  [/so[\-\s]?so/gi, 'tak tak'],
  [/ok[\-\s]?ish/gi, 'tak akor√°t'],
  [/hard\s+W/gi, 'velk√© v√≠tƒõzstv√≠'],
  [/on\s+point/gi, 'p≈ôesn√©'],
  [/chef'?s\s+kiss/gi, 'dokonal√©'],
  [/low\s+effort/gi, 'm√°lo √∫sil√≠'],
  
  // Bƒõ≈æn√° anglick√° slov√≠ƒçka (kr√°tk√°, ƒçasto se vyskytuj√≠c√≠)
  [/\bjust\b/gi, 'jenom'],
  [/\bliterally\b/gi, 'doslova'],
  [/\bno\b/gi, '≈æ√°dn√©'],
  
  // Openery a bƒõ≈æn√© v√Ωrazy
  [/\bfr\b/gi, 'v√°≈ænƒõ'],
  [/\bngl\b/gi, 'up≈ô√≠mnƒõ'],
  [/\bidk\b/gi, 'nev√≠m'],
  [/\bimo\b/gi, 'podle mƒõ'],
  [/\bbtw\b/gi, 'mimochodem'],
  [/\bfyi\b/gi, 'pro tvou informaci'],
  [/\birl\b/gi, 'v re√°lu'],
  [/lowkey/gi, 'trochu'],
  [/highkey/gi, 'hodnƒõ'],
  [/\bmid\b/gi, 'pr≈Ømƒõrn√©'],
  [/goated/gi, 'legend√°rn√≠'],
  [/kino/gi, 'filmov√©'],
  [/heat/gi, '≈æhav√©'],
  [/valid/gi, 'dobr√©'],
  [/drip/gi, 'styl'],
  [/mega/gi, 'hodnƒõ'],
  [/fire/gi, 'super'],
  [/\bcap\b/gi, 'le≈æ'],
  [/\bbro\b/gi, 'br√°cho'],
  [/k(√°|a)mo/gi, 'kamar√°de'],
  
  // Nov√© v√Ωrazy ze slovn√≠ku
  [/\baf\b/gi, 'extr√©mnƒõ'],
  [/banger/gi, 'hit'],
  [/bestie/gi, 'nejlep≈°√≠ k√°mo≈°'],
  [/boomer/gi, 'star≈°√≠ generace'],
  [/brain\s+rot/gi, 'hniloba mozku'],
  [/cancelled/gi, 'zru≈°en√Ω'],
  [/classy/gi, 'elegantn√≠'],
  [/crush/gi, 'zamilov√°n√≠'],
  [/dad\s+joke/gi, 'trapn√Ω vtip'],
  [/eboy|egirl/gi, 'emo styl'],
  [/fail/gi, 'ne√∫spƒõch'],
  [/finsta/gi, 'fale≈°n√Ω Instagram'],
  [/flexit/gi, 'p≈ôedv√°dƒõt se'],
  [/fomo/gi, 'strach zme≈°kat'],
  [/gaslighting/gi, 'manipulace'],
  [/ghosting/gi, 'ignorov√°n√≠'],
  [/goat/gi, 'nejlep≈°√≠'],
  [/goofy/gi, 'bl√°zniv√Ω'],
  [/red\s+flag/gi, 'varovn√Ω sign√°l'],
  [/green\s+flag/gi, 'pozitivn√≠ sign√°l'],
  [/beige\s+flag/gi, 'neutr√°ln√≠ sign√°l'],
  [/shady/gi, 'podez≈ôel√©'],
  [/shitpost/gi, 'nesmysln√Ω p≈ô√≠spƒõvek'],
  [/situationship/gi, 'vztah nevztah'],
  [/snowflake/gi, 'p≈ôecitlivƒõl√Ω'],
  [/swag/gi, 'styl'],
  [/troll(ing)?/gi, 'provokov√°n√≠'],
  [/vanilla/gi, 'nudn√©'],
  [/weirdo/gi, 'podiv√≠n'],
  [/academic\s+victim/gi, 'uƒçen√≠ nejde'],
  [/academic\s+weapon/gi, 'dobr√Ω ve ≈°kole'],
  [/ate\s+and\s+left\s+no\s+crumbs/gi, 'udƒõlal skvƒõle'],
  [/baddie/gi, 'drsn√° ≈æena'],
  [/\bbae\b/gi, 'mil√°ƒçek'],
  [/baller/gi, '√∫spƒõ≈°n√Ω'],
  [/ballin/gi, 'luxusn√≠ ≈æivot'],
  [/black\s+cat/gi, 'chladn√° energie'],
  [/bodyshaming/gi, 'ur√°≈æen√≠ tƒõla'],
  [/bombex/gi, 'super'],
  [/booknout/gi, 'zarezervovat'],
  [/boujee|bougie/gi, 'luxusn√≠'],
  [/\bbruh\b/gi, 'k√°mo'],
  [/built\s+different/gi, 'talentovan√Ω'],
  [/chillovat/gi, 'relaxovat'],
  [/\bchill\b/gi, 'v klidu'],
  [/cooking/gi, 'dƒõlat dob≈ôe'],
  [/let\s+(him|her|them)\s+cook/gi, 'nech ho/ji tvo≈ôit'],
  [/coping\s+mechanism/gi, 'zp≈Øsob vyrovn√°n√≠'],
  [/cringovat/gi, 'b√Ωt trapn√Ω'],
  [/death\s+stare/gi, 'mrtvoln√Ω pohled'],
  
  // Actions z lexikonu
  [/reset/gi, 'restart'],
  [/vypnout\s+notifikace/gi, 'vypnout notifikace'],
  [/d(√°|a)t\s+pauzu/gi, 'd√°t pauzu'],
  [/stretch/gi, 'prota≈æen√≠'],
  [/nadejchat\s+vzduch/gi, 'nadejchat vzduch'],
  [/vym(ƒõ|e)nit\s+playlist/gi, 'vymƒõnit playlist'],
  [/p(√≠|i)t\s+vodu/gi, 'p√≠t vodu'],
  [/short\s+walk/gi, 'kr√°tk√° proch√°zka'],
  [/sn(√≠|i)(≈æ|z)it\s+jas/gi, 'sn√≠≈æit jas'],
  [/dark\s+mode/gi, 'tmav√Ω re≈æim'],
  [/offline\s+m(√≥|o)d/gi, 'offline re≈æim'],
  [/deep\s+breath/gi, 'hlubok√Ω n√°dech'],
  [/rychl(e|ej)\s+detox\s+s(√≠|i)t(√≠|i)/gi, 'rychl√Ω detox s√≠t√≠'],
  [/proklepat\s+prsty/gi, 'proklepat prsty'],
  [/mind\s+reset/gi, 'reset mysli'],
  [/rychl(e|ej)\s+re[\-\s]?sync/gi, 'rychl√° synchronizace'],
  [/st(≈ô|r)ihnout\s+mini\s+(√∫|u)kol/gi, 'udƒõlat mini√∫kol'],
  [/odlo(≈æ|z)it\s+perfekcionismus/gi, 'odlo≈æit perfekcionismus'],
  [/zapsat\s+\d+\s+my(≈°|s)lenky/gi, 'zapsat my≈°lenky'],
  [/deg(e)?≈°/gi, 'hloup√Ω'],
  [/dope/gi, 'super'],
  [/edgovat/gi, 'nap√≠nat'],
  [/fame/gi, 'slavn√Ω'],
  [/fancy/gi, 'noblesn√≠'],
  [/feelovat/gi, 'c√≠tit'],
  [/fel(√°|a)ci/gi, 'k√°mo≈°i'],
  [/felit/gi, 'posedƒõt'],
  [/\bfit\b/gi, 'outfit'],
  [/fit\s+check/gi, 'uk√°zka outfitu'],
  [/\bflex\b/gi, 'chlubit se'],
  [/\bflop\b/gi, 'ne√∫spƒõch'],
  [/fruity/gi, 'ne √∫plnƒõ hetero'],
  [/gaslight/gi, 'manipulovat'],
  [/gatekeep/gi, 'kontrolovat p≈ô√≠stup'],
  [/ghostnout/gi, 'ignorovat'],
  [/girl\s+dinner/gi, 'snacky m√≠sto j√≠dla'],
  [/girl\s+math/gi, '≈æensk√° logika'],
  [/girlboss/gi, '√∫spƒõ≈°n√° ≈æena'],
  [/glow[\-\s]?up/gi, 'zmƒõna k lep≈°√≠mu'],
  [/glow[\-\s]?down/gi, 'zmƒõna k hor≈°√≠mu'],
  [/golden\s+retriever/gi, 'mil√Ω ƒçlovƒõk'],
  [/gymrat/gi, 'z√°visl√Ω na cviƒçen√≠'],
  [/highlight/gi, 'vrchol'],
  [/hits\s+different/gi, 'jinak p≈Øsob√≠'],
  [/\bhoe\b/gi, 'lehk√° d√≠vka'],
  [/\bhot\b/gi, 'atraktivn√≠'],
  [/\bhuh\b/gi, 'co?'],
  [/ch(√°|a)br/gi, 'br√°cha'],
  [/\bchad\b/gi, 'alfa samec'],
  [/ch(√°|a)lka/gi, 'j√≠dlo'],
  [/ch(√°|a)lovat/gi, 'j√≠st'],
  [/checkuju|checknout/gi, 'zkontrolovat'],
  [/chicago/gi, 'm√≠sto pohody'],
  [/chicken\s+legs/gi, 'slab√© nohy'],
  [/\bick\b/gi, 'odpudiv√©'],
  [/imagine/gi, 'p≈ôedstav si'],
  [/its\s+giving/gi, 'vypad√° skvƒõle'],
  [/karen/gi, 'protivn√° ≈æena'],
  [/legit/gi, 'doopravdy'],
  [/legit\s+check/gi, 'kontrola pravosti'],
  [/\bmatch\b/gi, 'padnout si'],
  [/\bmeh\b/gi, 'nic moc'],
  [/\bmood\b/gi, 'n√°lada'],
  [/mother(ing)?/gi, 'kr√°lovna'],
  [/nefeelovat/gi, 'nec√≠t√≠m to'],
  [/netflix\s+and\s+chill/gi, 'sex'],
  [/niche/gi, 'unik√°tn√≠'],
  [/\bnope\b/gi, 'ne'],
  [/passenger\s+princess/gi, 'spolujezdec jako kr√°l'],
  [/period/gi, 'teƒçka'],
  [/photo\s+dump/gi, 'v√≠ce fotek'],
  [/pick\s+me\s+girl/gi, 'holka shazuj√≠c√≠ jin√©'],
  [/pregame/gi, 'p√≠t p≈ôed akc√≠'],
  [/puff(√≠|i)k/gi, 'elektronick√° cigareta'],
  [/\bqueen\b/gi, 'kr√°lovna'],
  [/resting\s+bitch\s+face/gi, 'odsuzuj√≠c√≠ pohled'],
  [/roman\s+empire/gi, 'neust√°le p≈ôem√Ω≈°let'],
  [/savage/gi, 'divo≈°sk√©'],
  [/\bscam\b/gi, 'podvod'],
  [/serving/gi, 'vypadat skvƒõle'],
  [/shade/gi, 'podez≈ôel√©'],
  [/\bship\b/gi, 'p√°rovat'],
  [/shipovat/gi, 'podporovat vztah'],
  [/shoutout/gi, 'vyzdvihnut√≠'],
  [/side\s+eye/gi, 'boƒçn√≠ oko'],
  [/\bsimp\b/gi, 'submisivn√≠ mu≈æ'],
  [/sip\s+tea/gi, 'hlt√°n√≠ drb≈Ø'],
  [/\bskip\b/gi, 'vynechat'],
  [/smash\s+or\s+pass/gi, 'ano nebo ne'],
  [/\bstan\b/gi, 'posedl√Ω fanou≈°ek'],
  [/solulu/gi, '≈ôe≈°en√≠'],
  [/sugar\s+(baby|daddy|mamma)/gi, 'dotovan√Ω vztah'],
  [/sweet\s+treat/gi, 'dezert√≠k'],
  [/tahat\s+se/gi, 'v√≠dat se'],
  [/spill\s+the\s+tea/gi, '≈ôekni drby'],
  [/the\s+feminine\s+urge/gi, '≈æensk√© nutk√°n√≠'],
  [/thirst\s+trap/gi, 'sv≈Ødn√° fotka'],
  [/tinderdate/gi, 'rande z Tinderu'],
  [/\btrigger\b/gi, 'spou≈°tƒõƒç'],
  [/trolling/gi, 'provokov√°n√≠'],
  [/turn\s+on|turn\s+off/gi, 'p≈ôita≈æliv√©/nep≈ôita≈æliv√©'],
  [/vyghostit/gi, 'ignorovat'],
  [/\bwack\b/gi, 'nudn√Ω'],
  [/white\s+girl\s+music/gi, 'Taylor Swift'],
  [/who\s+let\s+(him|her)\s+cook/gi, 'to je skvƒõl√©'],
  [/\bwoke\b/gi, 'politicky korektn√≠'],
  [/yapping/gi, '≈ævatlat'],
  [/\byass\b/gi, 'ano'],
  [/zaddy/gi, 'sexy star≈°√≠ mu≈æ'],
  [/zne(≈æ|z)ivit\s+se/gi, 'sebevra≈æda']
];

function looksGenZ(s){
  // Roz≈°√≠≈ôen√° detekce Gen-Z slangu vƒçetnƒõ ƒçesk√Ωch hybrid≈Ø a struktur
  const genZPatterns = [
    /\b(skibidi|rizz|based|cringe|bussin|cap|no cap|slay|fr|ngl|mid|drip|goated|delulu|lowkey|highkey|vibe|toxic|valid|fire|kino|heat|sus|yikes|cope|peak|clean|sleek|smooth|gas|lit|W|L)\b/i,
    /\b(fixnout|buffnout|nerfnout|shipnout|rerollnout|pushnout|deploynout|grindit|ghostnout|locknout|clapnout|resetnout|speedrunout|pivotnout|stacknout|pingnout|syncnout)\b/i,
    /\b(setup|flow|mood|grind|energy|stack|buff|nerf|clout|focus|deadline|scope|context|cooldown|overhead|latence|momentum|checkpoint|meta|xp|loot|combo)\b/i,
    /\b(bro|k√°mo|real talk|ok listen|true story|side note|btw|heads up|no jokes|literally|honestly|okay tak≈æe)\b/i,
    /\b(skill issue|hard W|hard L|on point|chef'?s kiss|low effort|brain lag|not it|ok-ish|so-so)\b/i,
    /(fr fr|on god|no cap|you know|like,)/i
  ];
  
  // Pokud se shoduje s jak√Ωmkoli Gen-Z patternem
  return genZPatterns.some(pattern => pattern.test(s));
}

function applyReplacements(s, pairs){
  let out = s;
  // Aplikuj v≈°echny nahrazen√≠ postupnƒõ
  for (const [re, to] of pairs){
    const regex = new RegExp(re.source, re.flags);
    let matches = [];
    let match;
    
    // Najdi v≈°echny matches
    while ((match = regex.exec(out)) !== null) {
      matches.push({index: match.index, length: match[0].length, original: match[0], replacement: to});
      // Pokud nen√≠ global flag, ukonƒçi
      if (!regex.global) break;
    }
    
    // Aplikuj v≈°echny nahrazen√≠ od konce, aby se neposunuly indexy
    for (let i = matches.length - 1; i >= 0; i--) {
      const m = matches[i];
      let replacement = m.replacement;
      // zachov√°n√≠ prvn√≠ kapitalizace
      if (m.original[0] === m.original[0].toUpperCase() && replacement.length) {
        replacement = replacement[0].toUpperCase() + replacement.slice(1);
      }
      out = out.substring(0, m.index) + replacement + out.substring(m.index + m.length);
    }
  }
  return out;
}

function translateLocal(text, direction){
  let s = String(text||'');
  if (!s.trim()) return "";
  if (direction === 'normal_to_gz'){
    s = applyReplacements(s, CZ2GZ_PHRASES);
    s = applyReplacements(s, CZ2GZ_WORDS);
    // P≈ôidej Gen-Z struktury a fillery do vƒõty
    s = addGenZFlair(s);
    return s;
  }
  if (direction === 'gz_to_normal'){
    // Nejd≈ô√≠v vyƒçisti Gen-Z fillery a struktury
    s = removeGenZFlair(s);
    // Pak p≈ôelo≈æ Gen-Z slova do ƒçe≈°tiny
    s = applyReplacements(s, GZ2CZ_WORDS);
    return s;
  }
  // autodetekce
  return looksGenZ(s) ? translateLocal(s,'gz_to_normal') : translateLocal(s,'normal_to_gz');
}

// Odstran√≠ Gen-Z fillery a strukturn√≠ prvky z textu (JEMNƒö)
function removeGenZFlair(text){
  let result = text;
  
  // Odstranƒõn√≠ JEN nejbƒõ≈ænƒõj≈°√≠ch filler≈Ø, kter√© nemƒõn√≠ v√Ωznam
  // Odstranit openers na zaƒç√°tku (ale zachovat v√Ωznam)
  result = result.replace(/^(jako|literally|honestly|okay tak≈æe|ok listen|hele)\s*,?\s*/i, '');
  
  // Odstranit suffix fillery na konci
  result = result.replace(/,?\s*(fr fr|no cap|on god|ngl)\s*\.?\s*$/i, '');
  
  // Odstranit "like" a "you know" kdy≈æ jsou jako fillery (ne ve smyslov√© ƒç√°sti)
  result = result.replace(/,\s*(like|you know)\s*,/gi, ', ');
  
  // Odstranit skibidi kdy≈æ je jen jako filler
  result = result.replace(/,?\s*skibidi (vibes|moment|energy)\s*/gi, ' ');
  
  // Vyƒçisti nadbyteƒçn√© mezery a interpunkci
  result = result
    .replace(/\s+/g, ' ')
    .replace(/\s*,\s*/g, ', ')
    .replace(/\s*\.\s*/g, '. ')
    .replace(/\s+([.,!?])/g, '$1')
    .replace(/^[,\s]+/, '')
    .replace(/[,\s]+$/, '')
    .trim();
  
  // Velk√© p√≠smeno na zaƒç√°tku
  if(result.length > 0){
    result = result[0].toUpperCase() + result.slice(1);
  }
  
  return result;
}

// P≈ôid√° Gen-Z struktury a fillery do p≈ôelo≈æen√© vƒõty (JEDNODU≈†≈†√ç)
function addGenZFlair(text){
  let result = text;
  
  // Men≈°√≠ ≈°ance na fillery - jen 20-30% ≈°ance
  const rand = Math.random();
  
  // Buƒè p≈ôidej prefix (20% ≈°ance)
  if(rand < 0.2){
    const prefixes = ['jako', 'literally', 'honestly'];
    result = prefixes[Math.floor(Math.random()*prefixes.length)] + ', ' + result;
  }
  // Nebo suffix (dal≈°√≠ 20% ≈°ance)
  else if(rand < 0.4){
    const suffixes = ['fr', 'no cap', 'ngl'];
    result = result + ', ' + suffixes[Math.floor(Math.random()*suffixes.length)];
  }
  
  return result;
}

// p≈ôepis p≈Øvodn√≠ translate(): nejd≈ô√≠v lok√°ln√≠, serverless fallback ti≈°e
async function translate(text, direction){
  const local = translateLocal(text, direction);
  // kdy≈æ se nƒõco zmƒõnilo, vra≈• hned
  if (local && local.toLowerCase() !== String(text||'').toLowerCase()) return local;

  try{
    const r = await fetch('/.netlify/functions/translate',{
      method:'POST', headers:{'Content-Type':'application/json'},
      body: JSON.stringify({ text, direction })
    });
    if (r.ok){
      const j = await r.json();
      if (j && j.translated) return j.translated;
    }
  }catch(e){}
  return local || String(text||'');
}
/* ========= konec lok√°ln√≠ho p≈ôekladaƒçe ========= */

async function showAutoTranslation(source){
  const el = document.getElementById('quoteTranslated');
  
  // Pokud nen√≠ AUTO nebo u≈æ bƒõ≈æ√≠ p≈ôeklad, skonƒçi
  if(!AUTO){ 
    el.style.display='none'; 
    el.textContent=''; 
    return; 
  }
  
  // Zabr√°n√≠me v√≠cen√°sobn√Ωm p≈ôeklad≈Øm najednou
  if(translationInProgress){
    return;
  }
  
  // Kontrola, ≈æe m√°me co p≈ôekl√°dat
  if(!source || !source.trim()){
    el.style.display='none';
    el.textContent='';
    return;
  }
  
  translationInProgress = true;
  
  try{
    const dir = looksGenZ(source) ? 'gz_to_normal' : 'normal_to_gz';
    const out = await translate(source, dir);
    
    // Zkontrolujeme znovu AUTO, proto≈æe u≈æivatel mohl checkbox zmƒõnit bƒõhem p≈ôekladu
    if(!AUTO){
      el.style.display='none';
      el.textContent='';
      return;
    }
    
    if(out && out.trim() && out.trim().toLowerCase() !== source.trim().toLowerCase()){
      el.textContent = '‚Ü≥ P≈ôeklad: ' + out;
      el.style.display='block';
    } else {
      el.style.display='none';
      el.textContent='';
    }
  } catch(e){
    console.error('Translation error:', e);
    el.style.display='none';
    el.textContent='';
  } finally {
    translationInProgress = false;
  }
}

async function init(){
  await loadLexicon();

  const btnG=document.getElementById('btnGenz');
  const btnS=document.getElementById('btnSafe');
  const apply=()=>{ btnG.classList.toggle('active',MODE==='genz'); btnS.classList.toggle('active',MODE==='family_friendly'); };
  btnG.onclick=()=>{ MODE='genz'; localStorage.setItem('mode',MODE); apply(); };
  btnS.onclick=()=>{ MODE='family_friendly'; localStorage.setItem('mode',MODE); apply(); };
  apply();

  const chk=document.getElementById('chkAutoTrans');
  chk.checked = AUTO;
  chk.onchange = async ()=>{
    AUTO = chk.checked;
    localStorage.setItem('autoTrans', AUTO?'1':'0');
    const transEl = document.getElementById('quoteTranslated');
    
    if(!AUTO){ 
      // Vypneme p≈ôeklad
      transEl.style.display='none'; 
      transEl.textContent='';
    } else { 
      // Zapneme p≈ôeklad - zobraz√≠me loading a pak p≈ôelo≈æ√≠me
      transEl.textContent = '‚Ü≥ P≈ôekl√°d√°m...';
      transEl.style.display='block';
      const currentQuote = document.getElementById('quote').textContent;
      if(currentQuote && currentQuote.trim()){
        await showAutoTranslation(currentQuote);
      }
    }
  };

  const url = new URLSearchParams(location.search);
  const q=url.get('q'); const m=url.get('mode'); if(m){ MODE=m; localStorage.setItem('mode',MODE); apply(); }
  const first = q?decodeURIComponent(q):compose();
  await setQuoteTyped(first, false);

  document.getElementById('next').onclick=async()=>{
    const text = compose();
    await setQuoteTyped(text);
  };
  // Copy button (guarded)
  const copyEl = document.getElementById('copy');
  if (copyEl) {
    copyEl.onclick = async () => {
      try {
        await navigator.clipboard.writeText(location.href);
      } catch (e) {
        console.warn('Clipboard write failed', e);
      }
      const c = document.getElementById('copy'); if (c) { const prev = c.textContent; c.textContent = 'Zkopƒçeno ‚úÖ'; setTimeout(()=>{ c.textContent = prev; }, 1100); }
    };
  }

  // Share button - prefer #shareMain, fallback to #share (guarded)
  (function(){
    const shareEl = document.getElementById('shareMain') || document.getElementById('share');
    if (!shareEl) return;
    shareEl.onclick = async () => {
      try{
        const quote = (document.getElementById('quote') && document.getElementById('quote').textContent) || '';
        if (navigator.share){
          await navigator.share({title:'TY VOLE .wtf', text: quote, url: location.href});
        } else {
          await navigator.clipboard.writeText(location.href);
        }
        const prev = shareEl.textContent;
        shareEl.textContent = 'Odesl√°no ‚úÖ';
        setTimeout(()=>{ shareEl.textContent = prev; }, 1100);
      }catch(e){
        console.warn('Share failed', e);
      }
    };
  })();

  // Translator bottom sheet
  const sheet=document.getElementById('sheet'), back=document.getElementById('backdrop');
  const openSheet=()=>{sheet.classList.add('open');back.classList.add('show');};
  const closeSheet=()=>{sheet.classList.remove('open');back.classList.remove('show');};
  document.getElementById('btnSheet').onclick=openSheet;
  document.getElementById('closeSheet').onclick=closeSheet; back.onclick=closeSheet;

  const tNorm=document.getElementById('tNorm'), tGenz=document.getElementById('tGenz');
  const explanationDiv = document.getElementById('explanation');
  const explanationText = document.getElementById('explanationText');
  
  // Funkce pro zobrazen√≠ vysvƒõtlen√≠
  function showExplanation(text){
    if(!text || !text.trim()) {
      explanationDiv.style.display='none';
      return;
    }
    
    const words = text.toLowerCase().match(/\b[\w\s-]+\b/g) || [];
    const explanations = [];
    
    // Najdi v≈°echny Gen-Z v√Ωrazy a jejich vysvƒõtlen√≠
    for(const word of words){
      const cleanWord = word.trim();
      if(GZ2CZ_EXPLANATIONS[cleanWord]){
        explanations.push(`<strong>${cleanWord}:</strong> ${GZ2CZ_EXPLANATIONS[cleanWord]}`);
      }
    }
    
    if(explanations.length > 0){
      explanationText.innerHTML = explanations.join('<br><br>');
      explanationDiv.style.display='block';
    } else {
      explanationDiv.style.display='none';
    }
  }
  
  // Jedno tlaƒç√≠tko pro p≈ôeklad v obou smƒõrech
  document.getElementById('bTranslate').onclick=async()=>{ 
    const normVal = tNorm.value.trim();
    const genzVal = tGenz.value.trim();
    
    // Schovat vysvƒõtlen√≠ p≈ôi zaƒç√°tku p≈ôekladu
    explanationDiv.style.display='none';
    
    if(normVal && !genzVal){
      // P≈ôeklad z norm√°ln√≠ do Gen-Z
      tGenz.value = await translate(normVal, 'normal_to_gz');
    } else if(genzVal && !normVal){
      // P≈ôeklad z Gen-Z do norm√°ln√≠ + zobraz vysvƒõtlen√≠
      tNorm.value = await translate(genzVal, 'gz_to_normal');
      showExplanation(genzVal);
    } else if(normVal && genzVal){
      // Oba jsou vyplnƒõn√© - p≈ôelo≈æ Gen-Z do norm√°ln√≠ (priorita vysvƒõtlen√≠)
      tNorm.value = await translate(genzVal, 'gz_to_normal');
      showExplanation(genzVal);
    }
  };
  
  // Tlaƒç√≠tko "Sma≈æ text" - vyma≈æe obƒõ textov√° pole
  document.getElementById('bClear').onclick=()=>{
    tNorm.value = '';
    tGenz.value = '';
    explanationDiv.style.display='none';
    explanationText.textContent='';
    // Focus na prvn√≠ pole pro pohodl√≠
    tNorm.focus();
  };
}

// Initialize when DOM is ready
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', init);
} else {
  init();
}

// PWA SW registrace
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('sw.js').catch(console.error);
  });
}
</script>

<!-- Share System Scripts - defer ensures DOM is ready -->
<script src="lib/i18n.js" defer></script>
<script src="lib/analytics.js" defer></script>
<script src="lib/ab-test.js" defer></script>
<script src="lib/share.js" defer></script>

<script defer>
// Initialize share system - defer ensures DOM + other scripts are ready
(() => {
  // Track A/B test variant assignment
  if (window.abTest) window.abTest.trackCTAVariant();
  
  // Update CTA text based on A/B variant and language
  const shareMainBtn = document.getElementById('shareMain');
  const shareMainText = document.getElementById('shareMainText');
  const downloadText = document.getElementById('downloadText');
  const copyText = document.getElementById('copyText');
  const ctaMicrocopy = document.getElementById('ctaMicrocopy');
  
  function updateCTATexts() {
    // Update all button texts with RANDOM Gen-Z variants! üî•
    if (!window.i18n || !window.i18n.getRandomButtonText) {
      console.warn('i18n not ready, keeping fallback texts');
      return;
    }
    
    try {
      // Each button gets random Gen-Z text on EVERY page load
      shareMainText.textContent = window.i18n.getRandomButtonText('share');
      downloadText.textContent = window.i18n.getRandomButtonText('download');
      copyText.textContent = window.i18n.getRandomButtonText('copyLink');
    } catch (e) {
      console.error('Error updating CTA texts:', e);
    }
  }
  
  function showMicrocopy() {
    if (!window.i18n || !window.i18n.getRandomMicrocopy) return;
    
    const text = window.i18n.getRandomMicrocopy();
    ctaMicrocopy.textContent = text;
    ctaMicrocopy.style.display = 'block';
    // Re-trigger animation
    ctaMicrocopy.style.animation = 'none';
    setTimeout(() => {
      ctaMicrocopy.style.animation = '';
    }, 10);
  }
  
  // Update texts immediately with random variants (scripts have defer so they're loaded)
  updateCTATexts();
  
  // Share button - main CTA
  shareMainBtn.onclick = async () => {
    const quote = document.getElementById('quote').textContent;
    window.analytics.ctaClick(window.abTest.cta.getVariant());
    await window.shareSystem.share(quote);
  };
  
  // Download button
  document.getElementById('downloadCard').onclick = async () => {
    const quote = document.getElementById('quote').textContent;
    window.shareSystem.currentQuote = quote;
    await window.shareSystem.downloadCard();
  };
  
  // Copy link button - keep original functionality but track
  const originalCopyHandler = document.getElementById('copy').onclick;
  document.getElementById('copy').onclick = async () => {
    window.analytics.copyLink();
    await window.shareSystem.copyLink();
  };
  
  // Show microcopy when new quote is generated
  const originalNextHandler = document.getElementById('next').onclick;
  document.getElementById('next').onclick = async function() {
    await originalNextHandler.call(this);
    showMicrocopy();
  };
  
  // Show microcopy on initial load
  setTimeout(showMicrocopy, 500);
  
  // Generate card for current quote on load (preload)
  setTimeout(async () => {
    const quote = document.getElementById('quote').textContent;
    if (quote && quote !== '‚Ä¶naƒç√≠t√°m fresh hl√°≈°ku‚Ä¶') {
      try {
        await window.shareSystem.generateCardImage(quote);
        console.log('[Share] Card preloaded');
      } catch (e) {
        console.warn('[Share] Preload failed:', e);
      }
    }
  }, 1000);
})();
</script>

</body>
</html>
